<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GovBoard Tag Chart</title>
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
</head>
<body class="bg-gray-100 text-gray-900">
  <div id="root" class="p-6"></div>

  <script type="text/babel">
    const { useEffect } = React;

    function TagChart() {
      useEffect(() => {
        fetch("parsed_agenda_combined.json")
          .then(res => res.json())
          .then(data => {
            const tagCounts = {};
            data.forEach(item => {
              item.tags.forEach(tag => {
                tagCounts[tag] = (tagCounts[tag] || 0) + 1;
              });
            });

            const ctx = document.getElementById("tagChart").getContext("2d");
            new Chart(ctx, {
              type: "bar",
              data: {
                labels: Object.keys(tagCounts),
                datasets: [{
                  label: "Tag Frequency",
                  data: Object.values(tagCounts),
                  backgroundColor: "rgba(59, 130, 246, 0.6)",
                  borderColor: "rgba(37, 99, 235, 1)",
                  borderWidth: 1
                }]
              },
              options: {
                responsive: true,
                plugins: {
                  legend: { display: false },
                  title: { display: true, text: "Agenda Items by Tag" }
                },
                scales: {
                  y: { beginAtZero: true, ticks: { stepSize: 1 } }
                }
              }
            });
          })
          .catch(err => console.error("Failed to load data", err));
      }, []);

      return (
        <main>
          <h1 className="text-3xl font-bold mb-6">Tag Frequency Chart</h1>
          <canvas id="tagChart" className="w-full max-w-3xl h-80"></canvas>
        </main>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<TagChart />);
  </script>
</body>
</html>
